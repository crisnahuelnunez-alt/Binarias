<!DOCTYPE html>

<html lang="es">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>GestiÃ³n de Riesgo Pro</title>

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

Â  Â  <style>

Â  Â  Â  Â  :root {

Â  Â  Â  Â  Â  Â  --color-background-start: #1a1a2e; --color-background-mid: #16213e; --color-background-end: #0f3460;

Â  Â  Â  Â  Â  Â  --color-primary: #00d4ff; --color-secondary: #00ff88; --color-tertiary: #a0a0a0;

Â  Â  Â  Â  Â  Â  --color-text-light: #e0e0e0; --color-text-dark: #333; --color-card-background: rgba(22, 33, 62, 0.75);

Â  Â  Â  Â  Â  Â  --color-card-border: rgba(255, 255, 255, 0.15); --color-input-background: rgba(0, 0, 0, 0.3);

Â  Â  Â  Â  Â  Â  --color-win: #28a745; --color-loss: #dc3545; --color-warning: #ffc107;

Â  Â  Â  Â  Â  Â  --border-radius-main: 15px; --border-radius-sm: 8px; --font-family-main: 'Poppins', sans-serif;

Â  Â  Â  Â  }

Â  Â  Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; }

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: var(--font-family-main);

Â  Â  Â  Â  Â  Â  /* === NUEVO FONDO CON IMAGEN === */

Â  Â  Â  Â  Â  Â  background-color: var(--color-background-start);

Â  Â  Â  Â  Â  Â  background-image:Â 

Â  Â  Â  Â  Â  Â  Â  Â  linear-gradient(135deg, var(--color-background-start) 0%, var(--color-background-mid) 50%, var(--color-background-end) 100%),

Â  Â  Â  Â  Â  Â  Â  Â  url('assets/Gemini_Generated_Image_iogzlriogzlriogz.png');

Â  Â  Â  Â  Â  Â  background-size: cover;

Â  Â  Â  Â  Â  Â  background-position: center center;

Â  Â  Â  Â  Â  Â  background-blend-mode: overlay; /* Mezcla el degradado con la imagen */

Â  Â  Â  Â  Â  Â  /* ============================== */

Â  Â  Â  Â  Â  Â  color: var(--color-text-light);Â 

Â  Â  Â  Â  Â  Â  min-height: 100vh;Â 

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: center;Â 

Â  Â  Â  Â  Â  Â  align-items: center;Â 

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  line-height: 1.6;Â 

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .hidden { display: none !important; }

Â  Â  Â  Â  #welcome-screen { text-align: center; max-width: 600px; width: 100%; padding: 40px; }

Â  Â  Â  Â  #welcome-screen h1 {

Â  Â  Â  Â  Â  Â  font-size: 3.5em; font-weight: 800; background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));

Â  Â  Â  Â  Â  Â  -webkit-background-clip: text; -webkit-text-fill-color: transparent;

Â  Â  Â  Â  Â  Â  text-shadow: 0 0 15px rgba(0, 212, 255, 0.3); margin-bottom: 10px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #welcome-screen p { font-size: 1.5em; color: var(--color-tertiary); margin-bottom: 40px; font-weight: 300; }

Â  Â  Â  Â  .container { max-width: 960px; width: 100%; margin: 0 auto; }

Â  Â  Â  Â  .card {

Â  Â  Â  Â  Â  Â  background: var(--color-card-background); backdrop-filter: blur(15px);

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-card-border);

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-main); padding: 35px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4); margin-bottom: 30px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .card h2 {

Â  Â  Â  Â  Â  Â  margin-bottom: 30px; color: var(--color-primary); font-size: 1.8em; font-weight: 700;

Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--color-card-border); padding-bottom: 18px;

Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between; gap: 12px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group { margin-bottom: 25px; width: 100%; }

Â  Â  Â  Â  .input-group label {

Â  Â  Â  Â  Â  Â  display: block; margin-bottom: 10px; font-weight: 600; color: var(--color-tertiary);

Â  Â  Â  Â  Â  Â  font-size: 0.95em; text-transform: uppercase; letter-spacing: 0.5px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group input, .input-group select, .input-group textarea {

Â  Â  Â  Â  Â  Â  width: 100%; padding: 16px; border: 1px solid transparent; border-radius: var(--border-radius-sm);

Â  Â  Â  Â  Â  Â  background: var(--color-input-background); color: var(--color-text-light);

Â  Â  Â  Â  Â  Â  font-size: 1.05em; transition: border-color 0.3s, box-shadow 0.3s; font-family: var(--font-family-main);

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group input:focus, .input-group select:focus, .input-group textarea:focus {

Â  Â  Â  Â  Â  Â  outline: none; border-color: var(--color-primary);

Â  Â  Â  Â  Â  Â  box-shadow: 0 0 18px rgba(0, 212, 255, 0.3);

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-with-symbol { position: relative; }

Â  Â  Â  Â  .input-with-symbol span { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: var(--color-tertiary); font-size: 1.1em; font-weight: 600; pointer-events: none; }

Â  Â  Â  Â  .input-with-symbol input { padding-left: 40px !important; }

Â  Â  Â  Â  .split-inputs { display: flex; gap: 25px; flex-wrap: wrap; }

Â  Â  Â  Â  .split-inputs .input-group { flex: 1; min-width: 280px; }

Â  Â  Â  Â  .btn, .btn-primary, .btn-secondary {

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark); border: none; padding: 18px 35px; border-radius: var(--border-radius-sm);

Â  Â  Â  Â  Â  Â  font-size: 1.15em; font-weight: 700; cursor: pointer; width: 100%; margin-top: 15px;

Â  Â  Â  Â  Â  Â  text-transform: uppercase; letter-spacing: 0.8px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary { background: linear-gradient(45deg, var(--color-primary), var(--color-secondary)); }

Â  Â  Â  Â  .btn-secondary { background: #6c757d; color: white; font-size: 0.8em; padding: 8px 15px; width: auto; margin-top: 0; }

Â  Â  Â  Â  .btn-win { background-color: var(--color-win); color: white; }

Â  Â  Â  Â  .btn-loss { background-color: var(--color-loss); color: white; }

Â  Â  Â  Â  .investment-amount { font-size: 4.5em; font-weight: 800; background: linear-gradient(45deg, var(--color-primary), var(--color-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 30px; line-height: 1.2; text-shadow: 0 0 20px rgba(0, 212, 255, 0.5); text-align: center; }

Â  Â  Â  Â  .action-buttons { display: flex; gap: 20px; margin-top: 20px; }

Â  Â  Â  Â  #phase-display { font-size: 1em; color: var(--color-warning); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }

Â  Â  Â  Â  table { width: 100%; border-collapse: collapse; background: rgba(0, 0, 0, 0.2); border-radius: var(--border-radius-main); overflow: hidden; }

Â  Â  Â  Â  th, td { padding: 18px; text-align: center; border-bottom: 1px solid var(--color-card-border); }

Â  Â  Â  Â  th { background: rgba(0, 0, 0, 0.3); color: var(--color-primary); font-weight: 700; }

Â  Â  Â  Â  .win-row { background: rgba(0, 255, 136, 0.1); }

Â  Â  Â  Â  .loss-row { background: rgba(255, 0, 68, 0.1); }

Â  Â  Â  Â  @media (max-width: 768px) {

Â  Â  Â  Â  Â  Â  .investment-amount { font-size: 5em; }

Â  Â  Â  Â  Â  Â  .action-buttons { flex-direction: column; }

Â  Â  Â  Â  Â  Â  .action-buttons .btn { width: 100%; padding: 20px; font-size: 1.2em; }

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>

Â  Â  <div id="welcome-screen">

Â  Â  Â  Â  <h1>GestiÃ³n de Riesgo Pro</h1>

Â  Â  Â  Â  <p>Dominando Binarias</p>

Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  <label for="initial-balance">Â¿CuÃ¡l es tu capital para la sesiÃ³n?</label>

Â  Â  Â  Â  Â  Â  <div class="input-with-symbol">

Â  Â  Â  Â  Â  Â  Â  Â  <span>$</span>

Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="initial-balance" value="100" min="1">

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <button class="btn-primary" id="start-session-btn">Iniciar SesiÃ³n</button>

Â  Â  </div>



Â  Â  <div id="dashboard" class="container hidden">

Â  Â  Â  Â  <div id="setup-card" class="card">

Â  Â  Â  Â  Â  Â  <h2><span class="icon">âš™ï¸</span> Plan de SesiÃ³n</h2>

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="strategy">Estrategia de GestiÃ³n de Riesgo</label>

Â  Â  Â  Â  Â  Â  Â  Â  <select id="strategy">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="kelly">Criterio de Kelly (Ã“ptimo)</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="martingale">Martingala (RecuperaciÃ³n)</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="phases_system">Sistema de Fases (Ataque)</option>

Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="strategy-info-box" style="margin-bottom: 25px; padding: 15px; border-left: 4px solid; border-radius: 8px; font-size: 0.9em; line-height: 1.5;"></div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div id="phases-system-group" class="hidden">

Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="split-inputs">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="base-investment-percent">InversiÃ³n Base (%)</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="base-investment-percent" value="5" min="1">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="max-ops">Operaciones MÃ¡ximas</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="max-ops" value="10" min="2">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div class="split-inputs">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="balance">Balance de SesiÃ³n</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-with-symbol">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>$</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="balance" value="100" min="1" readonly>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="minInvestment">InversiÃ³n MÃ­nima</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-with-symbol">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>$</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="minInvestment" value="1" step="0.01" min="0.01">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="split-inputs">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="payoutRate">Payout del Broker (%)</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="payoutRate" value="87" step="0.1">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group" id="historicalWinRate-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="historicalWinRate">Tasa de Aciertos (%)</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="historicalWinRate" value="60" step="0.1">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="standard-params-group">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="split-inputs">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sessionProfitGoal">Take Profit (%)</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="sessionProfitGoal" value="20" min="1">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="stopLossPercent">Stop-Loss (%)</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="stopLossPercent" value="25" min="1">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button class="btn-primary" id="startBtn">â–¶ï¸ Comenzar Operativa</button>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="live-card" class="card hidden">

Â  Â  Â  Â  Â  Â  <h2>

Â  Â  Â  Â  Â  Â  Â  Â  <span><span class="icon">ğŸ”´</span> Panel de OperaciÃ³n</span>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="back-to-setup-btn" class="btn-secondary">â¬…ï¸ Volver a Configurar</button>

Â  Â  Â  Â  Â  Â  </h2>

Â  Â  Â  Â  Â  Â  <div id="live-panel-content" style="text-align: center;">

Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="operation-label"></h3>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="phase-display"></div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="investment-amount" class="investment-amount"></div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-buttons">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-win" id="winBtn">GanÃ© âœ…</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-loss" id="lossBtn">PerdÃ­ âŒ</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="history-card" class="card hidden">

Â  Â  Â  Â  Â  Â  <h2><span class="icon">ğŸ“‹</span> Historial de la SesiÃ³n</h2>

Â  Â  Â  Â  Â  Â  <div id="tableContent"></div>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="journal-card" class="card hidden">

Â  Â  Â  Â  Â  Â  <h2><span class="icon">âœï¸</span> AnÃ¡lisis de la SesiÃ³n</h2>

Â  Â  Â  Â  Â  Â  <div id="journal-summary" style="margin-bottom: 25px;"></div>

Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="journal-notes">Mis Notas de la SesiÃ³n</label>

Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="journal-notes" rows="4" placeholder="Â¿QuÃ© aprendiste hoy? Â¿Seguiste tu plan al 100%?"></textarea>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button class="btn-primary" id="save-session-btn">Guardar SesiÃ³n y Volver al Inicio</button>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  const state = {

Â  Â  Â  Â  Â  Â  strategy: 'kelly', maxOps: 10, baseInvestmentPercent: 5, currentPhase: 'acumulacion',

Â  Â  Â  Â  Â  Â  historicalWinRate: 0, payoutRate: 0, initialBalance: 0, minInvestment: 1,Â 

Â  Â  Â  Â  Â  Â  sessionProfitGoal: 20, stopLossPercent: 25, stopLossTriggerAmount: 0,Â 

Â  Â  Â  Â  Â  Â  takeProfitTriggerAmount: 0, currentBalance: 0, operationNumber: 1, winCount: 0,Â 

Â  Â  Â  Â  Â  Â  lastInvestment: 0, history: [], lossesToRecover: 0

Â  Â  Â  Â  };

Â  Â  Â  Â  const ui = {

Â  Â  Â  Â  Â  Â  elements: {

Â  Â  Â  Â  Â  Â  Â  Â  welcomeScreen: document.getElementById('welcome-screen'), dashboard: document.getElementById('dashboard'),

Â  Â  Â  Â  Â  Â  Â  Â  startSessionBtn: document.getElementById('start-session-btn'), initialBalanceInput: document.getElementById('initial-balance'),

Â  Â  Â  Â  Â  Â  Â  Â  balanceInput: document.getElementById('balance'), setupCard: document.getElementById('setup-card'),

Â  Â  Â  Â  Â  Â  Â  Â  liveCard: document.getElementById('live-card'), historyCard: document.getElementById('history-card'),

Â  Â  Â  Â  Â  Â  Â  Â  operationLabel: document.getElementById('operation-label'), investmentAmount: document.getElementById('investment-amount'),

Â  Â  Â  Â  Â  Â  Â  Â  tableContent: document.getElementById('tableContent'), strategySelect: document.getElementById('strategy'),

Â  Â  Â  Â  Â  Â  Â  Â  strategyInfoBox: document.getElementById('strategy-info-box'),

Â  Â  Â  Â  Â  Â  Â  Â  phasesSystemGroup: document.getElementById('phases-system-group'),

Â  Â  Â  Â  Â  Â  Â  Â  winRateGroup: document.getElementById('historicalWinRate-group'),

Â  Â  Â  Â  Â  Â  Â  Â  standardParamsGroup: document.getElementById('standard-params-group'),

Â  Â  Â  Â  Â  Â  Â  Â  startBtn: document.getElementById('startBtn'), winBtn: document.getElementById('winBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  lossBtn: document.getElementById('lossBtn'),

Â  Â  Â  Â  Â  Â  Â  Â  journalCard: document.getElementById('journal-card'), journalSummary: document.getElementById('journal-summary'),

Â  Â  Â  Â  Â  Â  Â  Â  journalNotes: document.getElementById('journal-notes'),

Â  Â  Â  Â  Â  Â  Â  Â  saveSessionBtn: document.getElementById('save-session-btn'),

Â  Â  Â  Â  Â  Â  Â  Â  backToSetupBtn: document.getElementById('back-to-setup-btn'),

Â  Â  Â  Â  Â  Â  Â  Â  phaseDisplay: document.getElementById('phase-display')

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  showDashboard() { this.elements.welcomeScreen.classList.add('hidden'); this.elements.dashboard.classList.remove('hidden'); document.body.style.alignItems = 'flex-start'; },

Â  Â  Â  Â  Â  Â  showWelcomeScreen() {

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.dashboard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.welcomeScreen.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.alignItems = 'center';

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  showSetup() {

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.liveCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.historyCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.journalCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.setupCard.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  updateLivePanel(opNum, totalOps, amountText) {

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.operationLabel.innerText = `OPERACIÃ“N #${opNum} de ${totalOps}`;

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.investmentAmount.innerText = amountText;

Â  Â  Â  Â  Â  Â  Â  Â  if(state.strategy === 'phases_system') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.elements.phaseDisplay.innerText = `FASE: ${state.currentPhase.toUpperCase()}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.elements.phaseDisplay.style.color = state.currentPhase === 'ataque' ? 'var(--color-secondary)' : 'var(--color-warning)';

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.elements.phaseDisplay.innerText = '';

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  renderHistoryTable(history) {

Â  Â  Â  Â  Â  Â  Â  Â  let tableHTML = `<table><thead><tr><th>Op#</th><th>Invertido</th><th>Resultado</th><th>G/P</th><th>Balance</th></tr></thead><tbody>`;

Â  Â  Â  Â  Â  Â  Â  Â  history.forEach(op => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rowClass = op.result === 'WIN' ? 'win-row' : 'loss-row';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const resultColor = op.netResult >= 0 ? 'var(--color-secondary)' : 'var(--color-loss)';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tableHTML += `<tr class="${rowClass}"><td>${op.op}</td><td>$${op.investment.toFixed(2)}</td><td>${op.result}</td><td style="color: ${resultColor}">$${op.netResult.toFixed(2)}</td><td>$${op.balance.toFixed(2)}</td></tr>`;

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  this.elements.tableContent.innerHTML = tableHTML + '</tbody></table>';

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  showLiveMode() { this.elements.setupCard.classList.add('hidden'); this.elements.liveCard.classList.remove('hidden'); this.elements.historyCard.classList.remove('hidden'); },

Â  Â  Â  Â  Â  Â  updateStrategyInfo(strategy) {

Â  Â  Â  Â  Â  Â  Â  Â  let info = {}; const infoBox = this.elements.strategyInfoBox;

Â  Â  Â  Â  Â  Â  Â  Â  switch (strategy) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'kelly': info = { borderColor: 'var(--color-primary)', title: '<strong>Riesgo:</strong> Moderado', description: '<strong>Ideal para:</strong> Crecimiento Ã³ptimo y a largo plazo.', warning: '<strong>Advertencia:</strong> Requiere conocer tu tasa de aciertos real.' }; break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'martingale': info = { borderColor: 'var(--color-warning)', title: '<strong>Riesgo:</strong> Alto', description: '<strong>Ideal para:</strong> RecuperaciÃ³n de pÃ©rdidas pequeÃ±as.', warning: '<strong>Advertencia:</strong> Peligroso en rachas de pÃ©rdidas.' }; break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'phases_system': info = { borderColor: 'var(--color-loss)', title: '<strong>Riesgo:</strong> Alto y EstratÃ©gico', description: '<strong>Ideal para:</strong> Arriesgar ganancias para un crecimiento exponencial.', warning: '<strong>Advertencia:</strong> Requiere disciplina para volver a la fase de acumulaciÃ³n.' }; break;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  infoBox.style.borderColor = info.borderColor; infoBox.innerHTML = `<p>${info.title}</p><p>${info.description}</p><p style="opacity: 0.8;">${info.warning}</p>`;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  };

Â  Â  Â  Â  const sessionManager = {

Â  Â  Â  Â  Â  Â  start() {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.strategy = ui.elements.strategySelect.value;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.initialBalance = parseFloat(ui.elements.balanceInput.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.minInvestment = parseFloat(document.getElementById('minInvestment').value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.payoutRate = parseFloat(document.getElementById('payoutRate').value) / 100;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (state.strategy === 'kelly') { state.historicalWinRate = parseFloat(document.getElementById('historicalWinRate').value) / 100; }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (state.strategy === 'phases_system') {Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.baseInvestmentPercent = parseFloat(document.getElementById('base-investment-percent').value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.maxOps = parseInt(document.getElementById('max-ops').value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.currentPhase = 'acumulacion';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.sessionProfitGoal = parseFloat(document.getElementById('sessionProfitGoal').value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.stopLossPercent = parseFloat(document.getElementById('stopLossPercent').value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.stopLossTriggerAmount = state.initialBalance * (1 - (state.stopLossPercent / 100));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.takeProfitTriggerAmount = state.initialBalance * (1 + (state.sessionProfitGoal / 100));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  } catch (e) { alert('Error en la configuraciÃ³n: ' + e.message); return; }

Â  Â  Â  Â  Â  Â  Â  Â  state.currentBalance = state.initialBalance; state.operationNumber = 1; state.winCount = 0;

Â  Â  Â  Â  Â  Â  Â  Â  state.history = []; state.lossesToRecover = 0;

Â  Â  Â  Â  Â  Â  Â  Â  ui.showLiveMode(); this.calculateNextInvestment();

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  calculateKellyInvestment() { const W = state.historicalWinRate; const R = state.payoutRate; if (R <= 0) return state.minInvestment; const kellyFraction = W - ((1 - W) / R); if (kellyFraction <= 0) return state.minInvestment; const investment = state.currentBalance * kellyFraction; return Math.max(investment, state.minInvestment); },

Â  Â  Â  Â  Â  Â  calculateMartingaleInvestment() {Â 

Â  Â  Â  Â  Â  Â  Â  Â  const targetWinProfit = state.initialBalance * 0.02;Â 

Â  Â  Â  Â  Â  Â  Â  Â  const calculatedInvestment = (state.lossesToRecover + targetWinProfit) / state.payoutRate;

Â  Â  Â  Â  Â  Â  Â  Â  return Math.max(calculatedInvestment, state.minInvestment);

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  calculatePhasesSystemInvestment() {

Â  Â  Â  Â  Â  Â  Â  Â  let investment = 0;

Â  Â  Â  Â  Â  Â  Â  Â  if(state.currentPhase === 'acumulacion') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  investment = state.initialBalance * (state.baseInvestmentPercent / 100);

Â  Â  Â  Â  Â  Â  Â  Â  } else {Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const profit = state.currentBalance - state.initialBalance;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  investment = profit > state.minInvestment ? profit : state.minInvestment;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  return Math.max(investment, state.minInvestment);

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  calculateNextInvestment() {

Â  Â  Â  Â  Â  Â  Â  Â  let finalInvestment = 0;

Â  Â  Â  Â  Â  Â  Â  Â  let totalOps = (state.strategy === 'phases_system') ? state.maxOps : 'âˆ';

Â  Â  Â  Â  Â  Â  Â  Â  if (state.strategy === 'kelly') { finalInvestment = this.calculateKellyInvestment(); }

Â  Â  Â  Â  Â  Â  Â  Â  else if (state.strategy === 'martingale') { finalInvestment = this.calculateMartingaleInvestment(); }

Â  Â  Â  Â  Â  Â  Â  Â  else if (state.strategy === 'phases_system') { finalInvestment = this.calculatePhasesSystemInvestment(); }

Â  Â  Â  Â  Â  Â  Â  Â  state.lastInvestment = Math.min(finalInvestment, state.currentBalance);

Â  Â  Â  Â  Â  Â  Â  Â  ui.updateLivePanel(state.operationNumber, totalOps, `$${state.lastInvestment.toFixed(2)}`);

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  logResult(isWin) {

Â  Â  Â  Â  Â  Â  Â  Â  const investment = state.lastInvestment;

Â  Â  Â  Â  Â  Â  Â  Â  if (investment > state.currentBalance) { this.end(false); return; }

Â  Â  Â  Â  Â  Â  Â  Â  const netResult = isWin ? investment * state.payoutRate : -investment;

Â  Â  Â  Â  Â  Â  Â  Â  state.currentBalance += netResult;

Â  Â  Â  Â  Â  Â  Â  Â  if (isWin) { state.winCount++; }

Â  Â  Â  Â  Â  Â  Â  Â  state.history.push({ op: state.operationNumber, investment, result: isWin ? 'WIN' : 'LOSS', netResult, balance: state.currentBalance });

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if(state.strategy === 'phases_system') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(state.currentPhase === 'acumulacion' && state.currentBalance > state.initialBalance) { state.currentPhase = 'ataque'; }Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (state.currentPhase === 'ataque' && !isWin) { state.currentPhase = 'acumulacion'; }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!isWin && state.strategy === 'martingale') { state.lossesToRecover += investment; }Â 

Â  Â  Â  Â  Â  Â  Â  Â  else if (isWin && state.strategy === 'martingale') { state.lossesToRecover = 0; }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  ui.renderHistoryTable(state.history);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  let isSessionOver = false;

Â  Â  Â  Â  Â  Â  Â  Â  if(state.strategy === 'phases_system') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isSessionOver = (state.operationNumber >= state.maxOps) || (state.currentBalance < state.minInvestment);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isSessionOver = (state.currentBalance <= state.stopLossTriggerAmount || state.currentBalance >= state.takeProfitTriggerAmount) || (state.currentBalance < state.minInvestment);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (isSessionOver) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.end(state.currentBalance > state.initialBalance);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.operationNumber++; this.calculateNextInvestment();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  end(isVictory) {

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.liveCard.classList.add('hidden'); ui.elements.historyCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  const profitLoss = state.currentBalance - state.initialBalance;

Â  Â  Â  Â  Â  Â  Â  Â  const profitLossPercent = (state.initialBalance > 0) ? (profitLoss / state.initialBalance) * 100 : 0;

Â  Â  Â  Â  Â  Â  Â  Â  const totalOps = state.history.length;

Â  Â  Â  Â  Â  Â  Â  Â  const winCount = state.history.filter(op => op.result === 'WIN').length;

Â  Â  Â  Â  Â  Â  Â  Â  const winRate = totalOps > 0 ? (winCount / totalOps) * 100 : 0;

Â  Â  Â  Â  Â  Â  Â  Â  const resultText = isVictory ? 'SesiÃ³n en Ganancia' : 'SesiÃ³n en PÃ©rdida';

Â  Â  Â  Â  Â  Â  Â  Â  const resultColor = isVictory ? 'var(--color-win)' : 'var(--color-loss)';

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.journalSummary.innerHTML = `<p style="font-size: 1.4em;"><strong>Resultado:</strong> <span style="color: ${resultColor};">${resultText}</span></p><p>Balance Final: $${state.currentBalance.toFixed(2)} ($${profitLoss.toFixed(2)})</p><p><strong>Operaciones Totales:</strong> ${totalOps}</p><p><strong>Tasa de Aciertos:</strong> ${winRate.toFixed(1)}% (${winCount}G / ${totalOps - winCount}P)</p>`;

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.journalCard.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  saveSessionAndReset() {

Â  Â  Â  Â  Â  Â  Â  Â  let allSessions = JSON.parse(localStorage.getItem('tradingSessions')) || [];

Â  Â  Â  Â  Â  Â  Â  Â  const sessionData = { date: new Date().toISOString(), initialBalance: state.initialBalance, finalBalance: state.currentBalance, strategy: state.strategy, notes: ui.elements.journalNotes.value, history: state.history };

Â  Â  Â  Â  Â  Â  Â  Â  allSessions.push(sessionData);

Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('tradingSessions', JSON.stringify(allSessions));

Â  Â  Â  Â  Â  Â  Â  Â  this.reset();

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  reset() {

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.journalNotes.value = '';

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.journalCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.liveCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.historyCard.classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.setupCard.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  ui.showWelcomeScreen();

Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  goBackToSetup() { ui.showSetup(); }

Â  Â  Â  Â  };

Â  Â  Â  Â  const app = {

Â  Â  Â  Â  Â  Â  init() {

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.startSessionBtn.addEventListener('click', () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const initialBalance = ui.elements.initialBalanceInput.value;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (parseFloat(initialBalance) > 0) { ui.elements.balanceInput.value = initialBalance; ui.showDashboard(); } else { alert("Por favor, introduce un balance vÃ¡lido."); }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.startBtn.addEventListener('click', () => sessionManager.start());

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.winBtn.addEventListener('click', () => sessionManager.logResult(true));

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.lossBtn.addEventListener('click', () => sessionManager.logResult(false));

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.saveSessionBtn.addEventListener('click', () => sessionManager.saveSessionAndReset());

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.backToSetupBtn.addEventListener('click', () => sessionManager.goBackToSetup());

Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.strategySelect.addEventListener('change', (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const strategy = e.target.value;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.phasesSystemGroup.classList.toggle('hidden', strategy !== 'phases_system');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.winRateGroup.classList.toggle('hidden', strategy !== 'kelly');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ui.elements.standardParamsGroup.classList.toggle('hidden', strategy === 'phases_system');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ui.updateStrategyInfo(strategy);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  ui.updateStrategyInfo('kelly');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  };

Â  Â  Â  Â  app.init();

Â  Â  </script>

</body>

</html>
